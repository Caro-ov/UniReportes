/* ========================================
   ESTILOS RESPONSIVE GLOBALES
   Mejoras de adaptabilidad móvil
   ======================================== */

/* Tablet y menor (max-width: 768px) */
@media (max-width: 768px) {
    /* Ajustes generales */
    body {
        font-size: 14px;
    }

    /* Header fijo en móvil - FORZADO MÁXIMO */
    .header-principal,
    header.header-principal,
    #header-container {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        width: 100% !important;
        height: 60px !important;
        z-index: 100 !important;
        background-color: #ffffff !important;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1) !important;
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
    }

    .header-contenido {
        padding: 0 12px !important;
        height: 100% !important;
        width: 100% !important;
        max-width: 100% !important;
        margin: 0 !important;
        display: flex !important;
        align-items: center !important;
        justify-content: space-between !important;
        gap: 12px !important;
        visibility: visible !important;
        opacity: 1 !important;
    }

    /* Botón menú móvil visible y funcional */
    .boton-menu-movil {
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        flex-shrink: 0 !important;
        width: 44px !important;
        height: 44px !important;
        padding: 10px !important;
        margin: 0 !important;
        background: none !important;
        border: none !important;
        cursor: pointer !important;
        color: #374151 !important;
        border-radius: 8px !important;
        transition: background-color 0.2s !important;
    }

    .boton-menu-movil:hover,
    .boton-menu-movil:active {
        background-color: #f3f4f6 !important;
    }
    
    .boton-menu-movil .material-symbols-outlined {
        font-size: 24px !important;
    }

    /* Controles usuario */
    .controles-usuario {
        display: flex !important;
        gap: 8px !important;
        align-items: center !important;
        flex-shrink: 0 !important;
        margin-left: auto !important;
    }

    /* Botón notificaciones */
    .boton-notificaciones,
    .notification-btn {
        width: 44px !important;
        height: 44px !important;
        padding: 10px !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        flex-shrink: 0 !important;
    }
    
    .boton-notificaciones .material-symbols-outlined,
    .notification-btn .material-symbols-outlined {
        font-size: 24px !important;
    }

    /* Perfil usuario - Dropdown funcional */
    .perfil-completo {
        position: relative !important;
        z-index: 300 !important;
        flex-shrink: 0 !important;
    }

    .dropdown-perfil,
    .user-dropdown {
        position: relative !important;
        z-index: 300 !important;
    }

    .perfil-usuario,
    #dropdownPerfil {
        width: 44px !important;
        height: 44px !important;
        padding: 0 !important;
        border: none !important;
        background: none !important;
        cursor: pointer !important;
        z-index: 300 !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        flex-shrink: 0 !important;
    }

    .avatar-usuario {
        width: 40px !important;
        height: 40px !important;
        border-radius: 50% !important;
        background-color: #1173d4 !important;
        background-size: cover !important;
        background-position: center !important;
        flex-shrink: 0 !important;
    }
        background-position: center;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 600;
        pointer-events: none;
    }

    /* Menú desplegable del perfil */
    #menuPerfil,
    .menu-desplegable {
        position: fixed !important;
        top: 60px !important;
        right: 8px !important;
        left: auto !important;
        min-width: 240px !important;
        max-width: 280px !important;
        background: white !important;
        border-radius: 12px !important;
        box-shadow: 0 8px 24px rgba(0,0,0,0.25) !important;
        padding: 8px !important;
        display: none !important;
        z-index: 350 !important;
        border: 1px solid #e5e7eb !important;
    }

    .menu-desplegable.mostrar,
    #menuPerfil.mostrar {
        display: block !important;
    }
    
    .dropdown-perfil.open .menu-desplegable,
    .dropdown-perfil.open #menuPerfil {
        display: block !important;
    }
    
    .user-dropdown.open .menu-desplegable,
    .user-dropdown.open #menuPerfil {
        display: block !important;
    }

    .opcion-menu {
        display: flex !important;
        align-items: center !important;
        gap: 12px !important;
        padding: 12px 16px !important;
        border-radius: 8px !important;
        text-decoration: none !important;
        color: #374151 !important;
        font-size: 15px !important;
        font-weight: 500 !important;
        transition: background-color 0.15s !important;
        cursor: pointer !important;
    }

    .opcion-menu:hover,
    .opcion-menu:active {
        background-color: #f3f4f6 !important;
        color: #1173d4 !important;
    }

    .opcion-menu .material-symbols-outlined {
        font-size: 20px !important;
    }

    .separador-menu {
        margin: 8px 0 !important;
        border: none !important;
        border-top: 1px solid #e5e7eb !important;
    }

    /* Ocultar info de usuario en header */
    .usuario-info-header {
        display: none !important;
    }

    /* Eliminar overlay que cubre la pantalla */
    body::after {
        display: none !important;
    }

    body.sidebar-open::after {
        display: none !important;
    }

    /* Sidebar - FORZAR EN MÓVIL */
    .sidebar,
    aside.sidebar,
    #sidebar-container {
        width: 70vw !important;
        max-width: 280px !important;
        min-width: 0 !important;
        position: fixed !important;
        left: 0 !important;
        top: 60px !important;
        bottom: 0 !important;
        height: calc(100vh - 60px) !important;
        z-index: 1001 !important;
        transform: translateX(-100%) !important;
        transition: transform 0.3s ease-in-out !important;
        background: white !important;
        box-shadow: 2px 0 8px rgba(0,0,0,0.15) !important;
        overflow-y: auto !important;
        overflow-x: hidden !important;
        will-change: transform !important;
        -webkit-transform: translateX(-100%) !important;
    }

    .sidebar.active,
    aside.sidebar.active,
    #sidebar-container.active {
        transform: translateX(0) !important;
        -webkit-transform: translateX(0) !important;
    }

    /* Overlay para cerrar sidebar en móvil */
    body::before {
        content: '';
        position: fixed;
        top: 60px;
        left: 0;
        width: 100%;
        height: calc(100vh - 60px);
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
    }

    body.sidebar-open::before {
        opacity: 1;
        pointer-events: all;
    }

    /* Main content sin sidebar en móvil - SIEMPRE VISIBLE */
    .main-content,
    main,
    .contenido-principal {
        margin-left: 0 !important;
        width: 100% !important;
        padding: 70px 12px 20px 12px !important;
        min-height: calc(100vh - 60px) !important;
        position: relative !important;
        z-index: 1 !important;
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    
    /* Contenedor wrapper */
    .contenido-wrapper {
        margin-left: 0 !important;
        width: 100% !important;
        padding-top: 60px !important;
    }

    /* Asegurar que el contenido sea visible */
    .seccion-principal,
    .seccion-estadisticas {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
    }

    /* Contenedores */
    .container,
    .contenido-wrapper {
        padding: 0 12px !important;
        max-width: 100% !important;
        margin-left: 0 !important;
    }

    /* Cards y tarjetas - MEJOR ORGANIZACIÓN */
    .card,
    .tarjeta-reporte,
    .tarjeta-beneficio,
    .stats-card,
    .action-card,
    .tarjeta-opcion {
        width: 100% !important;
        max-width: 100% !important;
        margin: 0 0 12px 0 !important;
    }

    /* Grid de opciones - mantener legibilidad */
    .grid-opciones {
        display: grid !important;
        grid-template-columns: 1fr !important;
        gap: 12px !important;
        margin-bottom: 24px !important;
    }

    /* Grid de estadísticas - 2 columnas en móvil */
    .grid-estadisticas {
        display: grid !important;
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 12px !important;
    }

    .tarjeta-estadistica {
        padding: 16px !important;
    }

    .titulo-estadistica {
        font-size: 13px !important;
    }

    .numero-estadistica {
        font-size: 28px !important;
    }

    /* Títulos de sección */
    .titulo-pagina {
        font-size: 24px !important;
        margin-bottom: 8px !important;
    }

    .descripcion-pagina {
        font-size: 14px !important;
        margin-bottom: 20px !important;
    }

    .titulo-seccion {
        font-size: 20px !important;
        margin: 24px 0 16px 0 !important;
    }

    /* Tablas responsivas */
    .table-container {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }

    table {
        min-width: 600px;
        font-size: 13px;
    }

    th, td {
        padding: 8px 6px !important;
    }

    /* Formularios */
    .form-group {
        margin-bottom: 16px;
    }

    input, select, textarea {
        font-size: 16px !important; /* Evita zoom en iOS */
    }

    .form-row {
        flex-direction: column !important;
    }

    /* Botones */
    .btn,
    button {
        width: 100%;
        padding: 12px 16px !important;
        font-size: 15px !important;
    }

    .btn-group {
        flex-direction: column !important;
        gap: 8px !important;
    }

    .btn-group .btn {
        width: 100% !important;
    }

    /* Modal */
    .modal-content {
        width: 95% !important;
        max-width: 95% !important;
        margin: 16px auto !important;
        max-height: 90vh;
        overflow-y: auto;
    }

    /* Títulos */
    h1 {
        font-size: 24px !important;
    }

    h2 {
        font-size: 20px !important;
    }

    h3 {
        font-size: 18px !important;
    }

    /* Notificaciones urgentes */
    #notificaciones-urgentes {
        margin: 0 -16px 16px -16px !important;
        border-radius: 0 !important;
    }

    .reporte-urgente-item {
        padding: 12px !important;
    }

    /* Filtros */
    .filtros-container,
    .filters-container {
        flex-direction: column !important;
        gap: 12px !important;
    }

    .filtro-item,
    .filter-item {
        width: 100% !important;
    }

    /* Paginación */
    .pagination {
        flex-wrap: wrap;
        gap: 4px;
        justify-content: center;
    }

    .pagination button {
        min-width: 40px !important;
        width: auto !important;
        padding: 8px 12px !important;
    }

    /* Dashboard stats */
    .dashboard-stats {
        grid-template-columns: 1fr !important;
    }

    /* Flex containers a columna */
    .flex-row {
        flex-direction: column !important;
    }
}

/* Móvil pequeño (max-width: 480px) */
@media (max-width: 480px) {
    body {
        font-size: 13px;
    }

    h1 {
        font-size: 22px !important;
    }

    h2 {
        font-size: 18px !important;
    }

    h3 {
        font-size: 16px !important;
    }

    /* Reducir padding general */
    .main-content,
    main {
        padding: 12px !important;
    }

    .container {
        padding: 0 12px !important;
    }

    /* Cards más compactas */
    .card,
    .stats-card {
        padding: 12px !important;
    }

    /* Botones más pequeños */
    .btn {
        padding: 10px 14px !important;
        font-size: 14px !important;
    }

    /* Tabla más compacta */
    table {
        font-size: 12px;
    }

    th, td {
        padding: 6px 4px !important;
    }

    /* Ocultar columnas menos importantes en móvil */
    .hide-mobile {
        display: none !important;
    }

    /* Modal ocupa toda la pantalla */
    .modal-content {
        width: 100% !important;
        height: 100vh !important;
        max-height: 100vh !important;
        margin: 0 !important;
        border-radius: 0 !important;
    }
}

/* Landscape en móviles */
@media (max-height: 500px) and (orientation: landscape) {
    .sidebar {
        overflow-y: auto;
    }

    .modal-content {
        max-height: 95vh;
        overflow-y: auto;
    }
}

/* Utilities responsive */
.mobile-only {
    display: none;
}

.desktop-only {
    display: block;
}

@media (max-width: 768px) {
    .mobile-only {
        display: block;
    }

    .desktop-only {
        display: none;
    }
}

/* Móvil específico (max-width: 480px) */
@media (max-width: 480px) {
    /* ===========================
       EXPLORAR REPORTES - MÓVIL
       =========================== */
    
    /* Tabla responsive - Card style SOLO en móvil */
    .tabla-reportes thead {
        display: none !important;
    }
    
    .tabla-reportes tbody tr {
        display: block !important;
        margin-bottom: 12px !important;
        border: 1px solid #e5e7eb !important;
        border-radius: 8px !important;
        padding: 12px !important;
        background: white !important;
        box-shadow: 0 1px 3px rgba(0,0,0,0.05) !important;
    }
    
    .tabla-reportes tbody td {
        display: flex !important;
        justify-content: space-between !important;
        padding: 8px 0 !important;
        border-bottom: 1px solid #f3f4f6 !important;
        text-align: left !important;
    }
    
    .tabla-reportes tbody td:last-child {
        border-bottom: none !important;
    }
    
    .tabla-reportes tbody td::before {
        content: attr(data-label) !important;
        font-weight: 600 !important;
        color: #6b7280 !important;
        font-size: 12px !important;
        text-transform: uppercase !important;
        letter-spacing: 0.5px !important;
    }
    
    /* Botones de acción adaptados */
    .btn-ver-reporte,
    .btn-accion {
        padding: 8px 12px !important;
        font-size: 13px !important;
        width: 100% !important;
        justify-content: center !important;
    }
}

/* Tablet y menor (max-width: 768px) - Estilos generales */
@media (max-width: 768px) {
    /* ===========================
       EXPLORAR REPORTES - TABLET/MÓVIL
       =========================== */
    
    /* Sección de reportes */
    .seccion-reportes-recientes {
        padding: 0 !important;
        margin-top: 0 !important;
    }
    
    .header-seccion {
        padding: 12px !important;
        flex-direction: column !important;
        gap: 12px !important;
        background: white !important;
    }
    
    .titulo-seccion {
        font-size: 18px !important;
        margin-bottom: 0 !important;
        font-weight: 600 !important;
    }
    
    /* Filtros más compactos */
    .filtros-reportes {
        display: flex !important;
        flex-direction: column !important;
        gap: 8px !important;
        width: 100% !important;
    }
    
    .filtro-grupo {
        width: 100% !important;
        padding: 8px 12px !important;
        border-radius: 6px !important;
        background: #f9fafb !important;
        display: flex !important;
        align-items: center !important;
        gap: 8px !important;
    }
    
    .filtro-label {
        font-size: 13px !important;
        font-weight: 500 !important;
        min-width: 70px !important;
        color: #4b5563 !important;
    }
    
    .filtro-buscar,
    .filtro-select {
        flex: 1 !important;
        font-size: 14px !important;
        padding: 8px 10px !important;
        border: 1px solid #e5e7eb !important;
        border-radius: 6px !important;
    }
    
    /* Tabla con scroll horizontal en tablet */
    .tabla-container {
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch !important;
        border-radius: 0 !important;
        margin: 0 !important;
        background: white !important;
    }
    
    /* Badges adaptados */
    .badge-prioridad,
    .badge-estado,
    .badge-categoria {
        font-size: 11px !important;
        padding: 4px 8px !important;
        border-radius: 4px !important;
        font-weight: 600 !important;
    }
    
    /* Notificaciones urgentes */
    .seccion-notificaciones-urgentes {
        margin: 12px !important;
        border-radius: 8px !important;
    }
    
    .notificacion-urgente {
        padding: 12px !important;
        flex-direction: column !important;
        gap: 12px !important;
    }
    
    /* Paginación más compacta */
    .paginacion-container {
        flex-direction: column !important;
        gap: 12px !important;
        padding: 12px !important;
    }
    
    .paginacion-botones {
        width: 100% !important;
        justify-content: space-between !important;
    }
}
